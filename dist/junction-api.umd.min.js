/*!
 * junction-api v0.2.5 
 * (c) 2019 zhagqn
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("axios")):"function"==typeof define&&define.amd?define(["axios"],t):(e=e||self,e.JunctionApi=t(e.axios))}(this,function(e){"use strict";function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function n(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?r(o,!0).forEach(function(r){t(e,r,o[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(o).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}e=e&&e.hasOwnProperty("default")?e.default:e;var o={},a={};o.setup=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=t.baseURL,c=r.hotel_id,s=r.restaurant_id,u=r.device_type,d=r.device_id,_=r.device_name,p=r.app_name,l=r.point_type;n?(o.request=n,o.request.config.baseURL=i):(o.request=e.create(),i&&(o.request.defaults.baseURL=i)),c&&(a.hotel_id=c),s&&(a.restaurant_id=s),u&&(a.device_type=u),d&&(a.device_id=d),_&&(a.device_name=_),p&&(a.app_name=p),l&&(a.point_type=l),o.defaultParams=a,o.request.interceptors.request.use(function(e){return e.params=e.params||{},Object.assign(e.params,a),e},function(e){Promise.reject(e)}),o.request.interceptors.response.use(function(e){return e.data.data},function(e){var t="";if(e&&e.response)switch(e.response.status){case 400:t="\u8bf7\u6c42\u9519\u8bef";break;case 404:t="\u8bf7\u6c42\u5730\u5740\u51fa\u9519: ".concat(e.response.config.url);break;case 408:t="\u8bf7\u6c42\u8d85\u65f6";break;case 500:t={msg:"\u670d\u52a1\u5668\u9519\u8bef",error:e.response.data};break;case 501:t="\u670d\u52a1\u672a\u5b9e\u73b0";break;case 502:t="\u7f51\u5173\u9519\u8bef";break;case 503:t="\u670d\u52a1\u4e0d\u53ef\u7528";break;case 504:t="\u7f51\u5173\u8d85\u65f6";break;case 505:t="HTTP\u7248\u672c\u4e0d\u53d7\u652f\u6301"}return Promise.reject(t)})},o.setup();var i={get:function(){return o.request.get("/cart/")},size:function(){return o.get("/cart/size/")},post:function(e){var t=e.lang_agnostic_id,r=e.quantity,n=void 0===r?1:r,a=e.select,i=void 0===a?1:a,c=e.variants,s=void 0===c?[]:c,u=e.note,d=void 0===u?"":u;return o.post("/cart/",{lang_agnostic_id:t,quantity:n,select:i,variants:s,note:d})},update:function(e){var t=e.cart_id,r=e.quantity,n=e.note,a=e.selected,i={quantity:r};return n&&(i.note=n),a&&(i.selected=a),o.put("cart/".concat(t,"/"),i)},delete:function(e){return o.delete("cart/".concat(e,"/"))},place_order:function(e){var t=e.expected_delivery_time,r=void 0===t?0:t,n=e.note,a=void 0===n?"":n,i=e.recipient_name,c=e.recipient_phone,s=e.address;return o.post("/cart/place_order/",{expected_delivery_time:r,note:a,recipient_name:i,recipient_phone:c,address:s})},request_service:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o.post("/cart/request_service/",{quantity:1,lang_agnostic_id:e,expected_delivery_time:t,variants:[],note:""})},single_merchandise_order:function(e){var t=e.lang_agnostic_id,r=e.quantity,n=void 0===r?1:r,a=e.select,i=void 0===a?1:a,c=e.variants,s=void 0===c?[]:c,u=e.note,d=void 0===u?"":u;return o.post("/cart/single_merchandise_order/",{lang_agnostic_id:t,quantity:n,select:i,variants:s,note:d})}},c={get:function(){return o.request.get("/customer_address/")}},s={get:function(e){return e?o.request.post("/customer_order/".concat(e,"/")):o.request.post("/customer_order/")},pay:function(e,t){return o.request.post("/customer_order/".concat(e,"/pay/?pay_method=").concat(t))},is_paid:function(e){return o.request.get("/customer_order/".concat(e,"/is_paid/"))},mark_paid:function(e,t,r){return o.request.post("/customer_order/".concat(e,"/mark_paid/?").concat(t,"=").concat(r))}},u={login:function(e,t){var r=t.phone,n=t.password,a=t.security_code,i=t.hotel_id,c=t.restaurant_id,s=t.wechat_official_login,u=t.wechat_mini_program_login,d=t.auto_wechat_register,_=t.code,p=t.cts_card_number,l=t.cts_password,g=t.uuid_register,f=t.customer_uuid;switch(e){case"phone":return o.request.post("/customer/login/",{phone:r,password:n,security_code:a});case"wechat":return o.request.post("/customer/login/",{hotel_id:i||o.defaultParams.hotel_id,restaurant_id:c||o.defaultParams.restaurant_id,wechat_official_login:s||1,wechat_mini_program_login:u||1,auto_wechat_register:d||1,code:_});case"test":return o.request.post("/customer/login/",{cts_card_number:p,cts_password:l});case"uuid":return o.request.post("/customer/login/",{uuid_register:g||1,customer_uuid:f})}},point:function(e,t){return o.request.get("/customer/point/?customer_uuid=".concat(e,"&point_type=").concat(t))},stats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["num_unread_order_messages","num_pending_orders"];return o.request.get("/customer/stats/?stats=".concat(e.toString()))},door_locks:function(e){return o.request.get("/customer/door_locks/?door_password=".concat(e))},get_profile:function(){return o.request.get("/customer/get_profile/")}},d={get:function(){return o.request.get("/device/get/?saveip=1")},register:function(e,t){return o.request.post("/device/register/",{hotel_id:o.defaultParams.hotel_id,device_id:o.defaultParams.device_id,device_name:o.defaultParams.device_name,device_type:o.defaultParams.device_type,room:e,validation_code:t})}},_={get:function(){return o.request.get("/event/")},event_result:{get:function(e){return o.request.get("/event/".concat(e,"/event_result/"))},post:function(e,t){return o.request.post("/event/".concat(e,"/event_result/"),{event_type:t})}},event_result_address:function(e){var t=e.event_id,r=e.recipient_name,n=e.recipient_phone,a=e.address;return o.request.post("/event/".concat(t,"/event_result_address/"),{recipient_name:r,recipient_phone:n,address:a})},claim_item:function(e){var t=e.airline_code,r=e.airline_card_number,n=e.redeem_code;return o.request.post("/event/claim_item/",{airline_code:t,airline_card_number:r,redeem_code:n})}},p={guest_profile:function(){return o.request.get("/hotel/guest_profile/")},access_token:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"room_control";return o.request.get("/hotel/guest_profile/?token_type=".concat(t,"&door_password=").concat(e))}},l={get:function(){return o.request.get("/image/")}},g=require("querystring"),f={get:function(e){return o.request.get("/page/".concat(e,"/"))},batch:function(e){return o.request.get("page/batch/?page_id=".concat(e.join(",")))},search:function(e,t){var r={page_type:t,lang_agnostic_id:e};return o.request.get("/page/search/?".concat(g.stringify(r)))},hotel:function(){return o.request.get("/page/hotel/")},butler_startpage:function(){return o.request.get("/page/butler_startpage/")},bulter_welcomepage:function(){return o.request.get("/page/butler_welcomepage/")},bulter_homepage:function(){return o.request.get("/page/butler_homepage/")},butler_tv_channels:function(){return o.request.get("/page/butler_tv_channels/")},butler_room_ctrl:function(e){return o.request.get("/page/butler_room_ctrl/?door_password=".concat(e))}},m={get:function(e){return e?o.request.post("/room_order/".concat(e)):o.request.post("/room_order/")},pay:function(e,t){return o.request.post("/room_order/".concat(e,"/pay/?pay_method=").concat(t))},is_paid:function(e){return o.request.get("/room_order/".concat(e,"/is_paid/"))},mark_paid:function(e,t,r){return o.request.post("/room_order/".concat(e,"/mark_paid/?").concat(t,"=").concat(r))}},v={now:function(){return o.request.get("/util/now/")},qr_code:function(e){return o.request.get("/util/qr_code/?code=".concat(e))}},q=function(e,t,r){o.setup(e,t,r)},h={http:o,cart:i,customer_address:c,customer_order:s,customer:u,device:d,event:_,hotel:p,image:l,page:f,room_order:m,util:v},y=function e(t,r){if(!e.installed){e.installed=!0;var o=r.axiosOptions,a=r.defaultParams,i=r.fly;q(o,a,i),t.prototype.$api=n({},h,{setup:q})}};return"undefined"!=typeof window&&window.Vue&&y(window.Vue),n({install:y,setup:q},h)});